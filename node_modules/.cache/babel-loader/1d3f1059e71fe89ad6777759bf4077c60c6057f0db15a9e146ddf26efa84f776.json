{"ast":null,"code":"import{useDropzone}from'react-dropzone';import axios from'axios';import{useNavigate,useLocation}from'react-router-dom';import{useState}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Upload=()=>{const[file,setFile]=useState(null);const[loading,setLoading]=useState(false);const[error,setError]=useState('');const navigate=useNavigate();const location=useLocation();const target=new URLSearchParams(location.search).get('target');// ?target=ats or job\nconst{getRootProps,getInputProps}=useDropzone({accept:{'application/pdf':['.pdf']},maxFiles:1,onDrop:acceptedFiles=>{setError('');setFile(acceptedFiles[0]);}});const handleUpload=async()=>{if(!file){setError('Please select a PDF resume before uploading.');return;}setLoading(true);setError('');const formData=new FormData();formData.append('file',file);try{const res=await axios.post(`${process.env.REACT_APP_BACKEND_URL}/api/parse-resume`,formData,{headers:{'Content-Type':'multipart/form-data'}});if(res.status===200){localStorage.setItem('ats-result',JSON.stringify(res.data));if(target==='job'){navigate('/job-eligibility-result');}else{navigate('/result');}}else{setError('Failed to analyze resume. Please try again.');}}catch(err){console.error('Upload error:',err);setError('Server error. Please make sure your backend is running.');}setLoading(false);};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gradient-to-br from-blue-600 to-blue-400 flex items-center justify-center px-4 py-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-8 rounded-lg shadow-lg max-w-md w-full\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold mb-6 text-center text-gray-800\",children:\"Upload Your Resume (PDF)\"}),/*#__PURE__*/_jsxs(\"div\",{...getRootProps(),className:\"border-2 border-dashed border-gray-500 bg-gray-50 p-6 text-center rounded-md cursor-pointer\",children:[/*#__PURE__*/_jsx(\"input\",{...getInputProps()}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Drag and drop your resume here, or click to upload\"}),file&&/*#__PURE__*/_jsx(\"p\",{className:\"text-green-600 font-semibold mt-3\",children:file.name})]}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 mt-4 text-center\",children:error}),/*#__PURE__*/_jsx(\"button\",{onClick:handleUpload,disabled:!file||loading,className:\"bg-blue-600 text-white px-6 py-2 rounded mt-6 w-full hover:bg-blue-700 transition duration-300 disabled:bg-gray-400\",children:loading?'Uploading...':'Upload and Analyze'})]})});};export default Upload;","map":{"version":3,"names":["useDropzone","axios","useNavigate","useLocation","useState","jsx","_jsx","jsxs","_jsxs","Upload","file","setFile","loading","setLoading","error","setError","navigate","location","target","URLSearchParams","search","get","getRootProps","getInputProps","accept","maxFiles","onDrop","acceptedFiles","handleUpload","formData","FormData","append","res","post","process","env","REACT_APP_BACKEND_URL","headers","status","localStorage","setItem","JSON","stringify","data","err","console","className","children","name","onClick","disabled"],"sources":["D:/interview/python projects/resume-ats-analyzer/frontend/src/pages/upload.jsx"],"sourcesContent":["import { useDropzone } from 'react-dropzone';\r\nimport axios from 'axios';\r\nimport { useNavigate, useLocation } from 'react-router-dom';\r\nimport { useState } from 'react';\r\n\r\nconst Upload = () => {\r\n  const [file, setFile] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n\r\n  const target = new URLSearchParams(location.search).get('target'); // ?target=ats or job\r\n\r\n  const { getRootProps, getInputProps } = useDropzone({\r\n    accept: { 'application/pdf': ['.pdf'] },\r\n    maxFiles: 1,\r\n    onDrop: (acceptedFiles) => {\r\n      setError('');\r\n      setFile(acceptedFiles[0]);\r\n    },\r\n  });\r\n\r\n  const handleUpload = async () => {\r\n    if (!file) {\r\n      setError('Please select a PDF resume before uploading.');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    setError('');\r\n\r\n    const formData = new FormData();\r\n    formData.append('file', file);\r\n\r\n    try {\r\n              const res = await axios.post(`${process.env.REACT_APP_BACKEND_URL}/api/parse-resume`, formData, {\r\n          headers: {\r\n            'Content-Type': 'multipart/form-data',\r\n          },\r\n        });\r\n\r\n\r\n      if (res.status === 200) {\r\n        localStorage.setItem('ats-result', JSON.stringify(res.data));\r\n        if (target === 'job') {\r\n          navigate('/job-eligibility-result');\r\n        } else {\r\n          navigate('/result');\r\n        }\r\n      } else {\r\n        setError('Failed to analyze resume. Please try again.');\r\n      }\r\n    } catch (err) {\r\n      console.error('Upload error:', err);\r\n      setError('Server error. Please make sure your backend is running.');\r\n    }\r\n\r\n    setLoading(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-600 to-blue-400 flex items-center justify-center px-4 py-12\">\r\n      <div className=\"bg-white p-8 rounded-lg shadow-lg max-w-md w-full\">\r\n        <h1 className=\"text-2xl font-bold mb-6 text-center text-gray-800\">Upload Your Resume (PDF)</h1>\r\n\r\n        <div\r\n          {...getRootProps()}\r\n          className=\"border-2 border-dashed border-gray-500 bg-gray-50 p-6 text-center rounded-md cursor-pointer\"\r\n        >\r\n          <input {...getInputProps()} />\r\n          <p className=\"text-gray-600\">Drag and drop your resume here, or click to upload</p>\r\n          {file && <p className=\"text-green-600 font-semibold mt-3\">{file.name}</p>}\r\n        </div>\r\n\r\n        {error && <p className=\"text-red-500 mt-4 text-center\">{error}</p>}\r\n\r\n        <button\r\n          onClick={handleUpload}\r\n          disabled={!file || loading}\r\n          className=\"bg-blue-600 text-white px-6 py-2 rounded mt-6 w-full hover:bg-blue-700 transition duration-300 disabled:bg-gray-400\"\r\n        >\r\n          {loading ? 'Uploading...' : 'Upload and Analyze'}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Upload;\r\n"],"mappings":"AAAA,OAASA,WAAW,KAAQ,gBAAgB,CAC5C,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,WAAW,CAAEC,WAAW,KAAQ,kBAAkB,CAC3D,OAASC,QAAQ,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEjC,KAAM,CAAAC,MAAM,CAAGA,CAAA,GAAM,CACnB,KAAM,CAACC,IAAI,CAAEC,OAAO,CAAC,CAAGP,QAAQ,CAAC,IAAI,CAAC,CACtC,KAAM,CAACQ,OAAO,CAAEC,UAAU,CAAC,CAAGT,QAAQ,CAAC,KAAK,CAAC,CAC7C,KAAM,CAACU,KAAK,CAAEC,QAAQ,CAAC,CAAGX,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAAAY,QAAQ,CAAGd,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAAe,QAAQ,CAAGd,WAAW,CAAC,CAAC,CAE9B,KAAM,CAAAe,MAAM,CAAG,GAAI,CAAAC,eAAe,CAACF,QAAQ,CAACG,MAAM,CAAC,CAACC,GAAG,CAAC,QAAQ,CAAC,CAAE;AAEnE,KAAM,CAAEC,YAAY,CAAEC,aAAc,CAAC,CAAGvB,WAAW,CAAC,CAClDwB,MAAM,CAAE,CAAE,iBAAiB,CAAE,CAAC,MAAM,CAAE,CAAC,CACvCC,QAAQ,CAAE,CAAC,CACXC,MAAM,CAAGC,aAAa,EAAK,CACzBZ,QAAQ,CAAC,EAAE,CAAC,CACZJ,OAAO,CAACgB,aAAa,CAAC,CAAC,CAAC,CAAC,CAC3B,CACF,CAAC,CAAC,CAEF,KAAM,CAAAC,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/B,GAAI,CAAClB,IAAI,CAAE,CACTK,QAAQ,CAAC,8CAA8C,CAAC,CACxD,OACF,CAEAF,UAAU,CAAC,IAAI,CAAC,CAChBE,QAAQ,CAAC,EAAE,CAAC,CAEZ,KAAM,CAAAc,QAAQ,CAAG,GAAI,CAAAC,QAAQ,CAAC,CAAC,CAC/BD,QAAQ,CAACE,MAAM,CAAC,MAAM,CAAErB,IAAI,CAAC,CAE7B,GAAI,CACM,KAAM,CAAAsB,GAAG,CAAG,KAAM,CAAA/B,KAAK,CAACgC,IAAI,CAAC,GAAGC,OAAO,CAACC,GAAG,CAACC,qBAAqB,mBAAmB,CAAEP,QAAQ,CAAE,CACpGQ,OAAO,CAAE,CACP,cAAc,CAAE,qBAClB,CACF,CAAC,CAAC,CAGJ,GAAIL,GAAG,CAACM,MAAM,GAAK,GAAG,CAAE,CACtBC,YAAY,CAACC,OAAO,CAAC,YAAY,CAAEC,IAAI,CAACC,SAAS,CAACV,GAAG,CAACW,IAAI,CAAC,CAAC,CAC5D,GAAIzB,MAAM,GAAK,KAAK,CAAE,CACpBF,QAAQ,CAAC,yBAAyB,CAAC,CACrC,CAAC,IAAM,CACLA,QAAQ,CAAC,SAAS,CAAC,CACrB,CACF,CAAC,IAAM,CACLD,QAAQ,CAAC,6CAA6C,CAAC,CACzD,CACF,CAAE,MAAO6B,GAAG,CAAE,CACZC,OAAO,CAAC/B,KAAK,CAAC,eAAe,CAAE8B,GAAG,CAAC,CACnC7B,QAAQ,CAAC,yDAAyD,CAAC,CACrE,CAEAF,UAAU,CAAC,KAAK,CAAC,CACnB,CAAC,CAED,mBACEP,IAAA,QAAKwC,SAAS,CAAC,sGAAsG,CAAAC,QAAA,cACnHvC,KAAA,QAAKsC,SAAS,CAAC,mDAAmD,CAAAC,QAAA,eAChEzC,IAAA,OAAIwC,SAAS,CAAC,mDAAmD,CAAAC,QAAA,CAAC,0BAAwB,CAAI,CAAC,cAE/FvC,KAAA,WACMc,YAAY,CAAC,CAAC,CAClBwB,SAAS,CAAC,6FAA6F,CAAAC,QAAA,eAEvGzC,IAAA,aAAWiB,aAAa,CAAC,CAAC,CAAG,CAAC,cAC9BjB,IAAA,MAAGwC,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,oDAAkD,CAAG,CAAC,CAClFrC,IAAI,eAAIJ,IAAA,MAAGwC,SAAS,CAAC,mCAAmC,CAAAC,QAAA,CAAErC,IAAI,CAACsC,IAAI,CAAI,CAAC,EACtE,CAAC,CAELlC,KAAK,eAAIR,IAAA,MAAGwC,SAAS,CAAC,+BAA+B,CAAAC,QAAA,CAAEjC,KAAK,CAAI,CAAC,cAElER,IAAA,WACE2C,OAAO,CAAErB,YAAa,CACtBsB,QAAQ,CAAE,CAACxC,IAAI,EAAIE,OAAQ,CAC3BkC,SAAS,CAAC,qHAAqH,CAAAC,QAAA,CAE9HnC,OAAO,CAAG,cAAc,CAAG,oBAAoB,CAC1C,CAAC,EACN,CAAC,CACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAAH,MAAM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}